!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={name:"d3.floorplan",version:"0.1.0",description:"A map-like interactive set of [reusable charts](http://bost.ocks.org/mike/chart/) for layering visualizations on a common local coordinate system like floor plans.",main:"src/index.js",repository:{type:"git",url:"git+https://github.com/dciarletta/d3-floorplan.git"},author:"David Ciarletta",license:"Apache License, Version 2.0",bugs:{url:"https://github.com/dciarletta/d3-floorplan/issues"},homepage:"https://dciarletta.github.io/d3-floorplan/",dependencies:{d3:"^3.5.6"},devDependencies:{babel:"^4.6.3","babel-core":"^5.6.15",babelify:"^5.0.3",browserify:"^10.2.6",grunt:"^0.4.5","grunt-browserify":"^3.8.0","grunt-contrib-less":"^1.0.1","grunt-contrib-uglify":"^0.9.1","load-grunt-config":"^0.17.1","time-grunt":"^1.2.1"}}},{}],2:[function(a,b,c){"use strict";function d(){function a(a){var j=h.range()[1]-h.range()[0],k=i.range()[1]-i.range()[0];a.each(function(a){if(a){var l=d3.select(this);c(l.selectAll("defs").data([0]).enter().append("defs"));var m=l.selectAll(".map-layers").data([0]),n=m.enter().append("g").attr("class","map-layers"),o=d3.transition(m);n.append("rect").attr("class","canvas").attr("pointer-events","all").style("opacity",0),o.attr("width",j).attr("height",k).attr("x",h.range()[0]).attr("y",i.range()[0]);var p=l.selectAll(".map-controls").data([0]),q=p.enter().append("g").attr("class","map-controls");d(q);var r=p.select(".hide").classed("ui-show-hide")?95:10,s=Math.max(45,10+20*e.length);p.attr("view-width",j).attr("transform","translate("+(j-r)+",0)").select("rect").attr("height",s);var t=p.select("g.layer-controls").selectAll("g").data(e,function(a){return a.id()}),u=t.enter().append("g").attr("class","ui-active").style("cursor","pointer").on("click",function(a){var b=d3.select(this),c=l.selectAll("g."+a.id());b.classed("ui-active")?(c.style("display","none"),b.classed("ui-active",!1).classed("ui-default",!0)):(c.style("display","inherit"),b.classed("ui-active",!0).classed("ui-default",!1))});u.append("rect").attr("x",0).attr("y",1).attr("rx",5).attr("ry",5).attr("width",75).attr("height",18).attr("stroke-width","1px"),u.append("text").attr("x",10).attr("y",15).style("font-size","12px").style("font-family","Helvetica, Arial, sans-serif").text(function(a){return a.title()}),t.transition().duration(1e3).attr("transform",function(a,b){return"translate(0,"+20*(e.length-(b+1))+")"});var v=m.selectAll(".maplayer").data(e,function(a){return a.id()});v.enter().append("g").attr("class",function(a){return"maplayer "+a.title()}).append("g").attr("class",function(a){return a.id()}).datum(null),v.exit().remove(),v.order(),v.each(function(b){d3.select(this).select("g."+b.id()).datum(a[b.id()]).call(b)}),l.call(d3.behavior.zoom().scaleExtent([1,g]).on("zoom",function(){f&&b(l,d3.event.scale,d3.event.translate)}))}})}function b(a,b,c){if(a){b&&(a.__scale__=b),c&&c.length>1&&(a.__translate__=c);var d=(1-a.__scale__)*(h.range()[1]-h.range()[0]),e=(1-a.__scale__)*(i.range()[1]-i.range()[0]);a.__translate__[0]=Math.min(h.range()[0],Math.max(a.__translate__[0],d)),a.__translate__[1]=Math.min(i.range()[0],Math.max(a.__translate__[1],e)),a.selectAll(".map-layers").attr("transform","translate("+a.__translate__+")scale("+a.__scale__+")")}}function c(a){a.each(function(){var a=d3.select(this),b=a.append("radialGradient").attr("id","metal-bump").attr("cx","50%").attr("cy","50%").attr("r","50%").attr("fx","50%").attr("fy","50%");b.append("stop").attr("offset","0%").style("stop-color","rgb(170,170,170)").style("stop-opacity",.6),b.append("stop").attr("offset","100%").style("stop-color","rgb(204,204,204)").style("stop-opacity",.5);var c=a.append("pattern").attr("id","grip-texture").attr("patternUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",3).attr("height",3);c.append("rect").attr("height",3).attr("width",3).attr("stroke","none").attr("fill","rgba(204,204,204,0.5)"),c.append("circle").attr("cx",1.5).attr("cy",1.5).attr("r",1).attr("stroke","none").attr("fill","url(#metal-bump)")})}function d(a){a.each(function(){var a=d3.select(this);a.append("path").attr("class","ui-show-hide").attr("d","M10,3 v40 h-7 a3,3 0 0,1 -3,-3 v-34 a3,3 0 0,1 3,-3 Z").attr("fill","url(#grip-texture)").attr("stroke","none").style("opacity",.5),a.append("path").attr("class","show ui-show-hide").attr("d","M2,23 l6,-15 v30 Z").attr("fill","rgb(204,204,204)").attr("stroke","none").style("opacity",.5),a.append("path").attr("class","hide").attr("d","M8,23 l-6,-15 v30 Z").attr("fill","rgb(204,204,204)").attr("stroke","none").style("opacity",0),a.append("path").attr("d","M10,3 v40 h-7 a3,3 0 0,1 -3,-3 v-34 a3,3 0 0,1 3,-3 Z").attr("pointer-events","all").attr("fill","none").attr("stroke","none").style("cursor","pointer").on("mouseover",function(){a.selectAll("path.ui-show-hide").style("opacity",1)}).on("mouseout",function(){a.selectAll("path.ui-show-hide").style("opacity",.5)}).on("click",function(){a.select(".hide").classed("ui-show-hide")?a.transition().duration(1e3).attr("transform","translate("+(a.attr("view-width")-10)+",0)").each("end",function(){a.select(".hide").style("opacity",0).classed("ui-show-hide",!1),a.select(".show").style("opacity",1).classed("ui-show-hide",!0),a.selectAll("path.ui-show-hide").style("opacity",.5)}):a.transition().duration(1e3).attr("transform","translate("+(a.attr("view-width")-95)+",0)").each("end",function(){a.select(".show").style("opacity",0).classed("ui-show-hide",!1),a.select(".hide").style("opacity",1).classed("ui-show-hide",!0),a.selectAll("path.ui-show-hide").style("opacity",.5)})}),a.append("rect").attr("x",10).attr("y",0).attr("width",85).attr("fill","rgba(204,204,204,0.9)").attr("stroke","none"),a.append("g").attr("class","layer-controls").attr("transform","translate(15,5)")})}var e=[],f=!0,g=5,h=d3.scale.linear(),i=d3.scale.linear();return a.xScale=function(b){return arguments.length?(h=b,e.forEach(function(a){a.xScale(h)}),a):h},a.yScale=function(b){return arguments.length?(i=b,e.forEach(function(a){a.yScale(i)}),a):i},a.panZoom=function(b){return arguments.length?(f=b,a):f},a.addLayer=function(b,c){return b.xScale(h),b.yScale(i),arguments.length>1&&c>=0?e.splice(c,0,b):e.push(b),a},a}b.exports=d},{}],3:[function(a,b,c){"use strict";function d(){function a(a){a.each(function(a){if(a&&a.map){var h=d3.select(this);a.units?" "!=a.units.charAt(0)&&(a.units=" "+a.units):a.units="";var i,j,k=a.map.map(function(a){return a.value}).sort(d3.ascending);switch(c){case"quantile":i=d3.scale.quantile().range([1,2,3,4,5,6]).domain(k),j=i.quantiles();break;case"quantized":i=d3.scale.quantize().range([1,2,3,4,5,6]).domain([k[0],k[k.length-1]]);var l=(i.domain()[1]-i.domain()[0])/6;j=[l,2*l,3*l,4*l,5*l];break;case"normal":var m=d3.mean(k),n=Math.sqrt(d3.sum(k,function(a){return Math.pow(a-m,2)})/k.length);i=d3.scale.quantile().range([1,2,3,4,5,6]).domain([m-6*n,m-2*n,m-n,m,m+n,m+2*n,m+6*n]),j=i.quantiles();break;default:customThresholds||(customThresholds=j);var o=customThresholds;o.push(o[o.length-1]),o.unshift(o[0]),i=d3.scale.quantile().range([1,2,3,4,5,6]).domain(o),customThresholds=j=i.quantiles()}var p=h.selectAll("g.heatmap").data([0]);p.enter().append("g").attr("class","heatmap"),this.__colors__&&this.__colors__!=b&&p.classed(this.__colors__,!1),p.classed(b,!0),this.__colors__=b;var q=p.selectAll("rect").data(a.map.filter(function(a){return!a.points}),function(a){return a.x+","+a.y}),r=q.enter().append("rect").style("opacity",1e-6);q.exit().transition().style("opacity",1e-6).remove(),r.append("title"),q.attr("x",function(a){return d(a.x)}).attr("y",function(a){return e(a.y)}).attr("height",Math.abs(e(a.binSize)-e(0))).attr("width",Math.abs(d(a.binSize)-d(0))).attr("class",function(a){return"d6-"+i(a.value)}).select("title").text(function(b){return"value: "+g(b.value)+a.units}),r.transition().style("opacity",.6);var s=p.selectAll("path").data(a.map.filter(function(a){return a.points}),function(a){return JSON.stringify(a.points)}),t=s.enter().append("path").attr("d",function(a){return f(a.points)+"Z"}).style("opacity",1e-6);s.exit().transition().style("opacity",1e-6).remove(),t.append("title"),s.attr("class",function(a){return"d6-"+i(a.value)}).select("title").text(function(b){return"value: "+g(b.value)+a.units}),t.transition().style("opacity",.6);var u=p.selectAll("text").data(a.map.filter(function(a){return a.points}),function(a){return JSON.stringify(a.points)}),v=u.enter().append("text").style("font-weight","bold").attr("text-anchor","middle").style("opacity",1e-6);u.exit().transition().style("opacity",1e-6).remove(),u.attr("transform",function(a){for(var b={x:0,y:0},c=0,f=0;f<a.points.length;++f){var g=a.points[f],h=a.points[f+1]||a.points[0],i=g.x*h.y-h.x*g.y;b.x+=(g.x+h.x)*i,b.y+=(g.y+h.y)*i,c+=i}return c/=2,b.x=b.x/(6*c),b.y=b.y/(6*c),"translate("+d(b.x)+","+e(b.y)+")"}).text(function(b){return g(b.value)+a.units}),v.transition().style("opacity",.6)}})}var b="RdYlBu",c="quantile",d=d3.scale.linear(),e=d3.scale.linear(),f=d3.svg.line().x(function(a){return d(a.x)}).y(function(a){return e(a.y)}),g=d3.format(".4n"),h="fp-heatmap-"+(new Date).valueOf(),i="heatmap";return a.xScale=function(b){return arguments.length?(d=b,a):d},a.yScale=function(b){return arguments.length?(e=b,a):e},a.colorSet=function(c){return arguments.length?(b=c,a):b},a.colorMode=function(b){return arguments.length?(c=b,a):c},a.customThresholds=function(b){return arguments.length?(customThresholds=b,a):customThresholds},a.id=function(){return h},a.title=function(b){return arguments.length?(i=b,a):i},a}b.exports=d},{}],4:[function(a,b,c){"use strict";function d(){function a(a){a.each(function(a){if(a){var d=d3.select(this),e=d.selectAll("image").data(a,function(a){return a.url});e.enter().append("image").attr("xlink:href",function(a){return a.url}).style("opacity",1e-6),e.exit().transition().style("opacity",1e-6).remove(),e.transition().attr("x",function(a){return b(a.x)}).attr("y",function(a){return c(a.y)}).attr("height",function(a){return c(a.y+a.height)-c(a.y)}).attr("width",function(a){return b(a.x+a.width)-b(a.x)}).style("opacity",function(a){return a.opacity||1})}})}var b=d3.scale.linear(),c=d3.scale.linear(),d="fp-imagelayer-"+(new Date).valueOf(),e="imagelayer";return a.xScale=function(c){return arguments.length?(b=c,a):b},a.yScale=function(b){return arguments.length?(c=b,a):c},a.id=function(){return d},a.title=function(b){return arguments.length?(e=b,a):e},a}b.exports=d},{}],5:[function(a,b,c){"use strict";var d=function(a){return a&&a.__esModule?a["default"]:a};Object.defineProperty(c,"__esModule",{value:!0});var e=d(a("./floorplan")),f=d(a("./heatmap")),g=d(a("./imagelayer")),h=d(a("./overlays")),i=d(a("./pathplot")),j=d(a("./vectorfield"));if(!window.d3)throw new Error("d3.js is required! > http://d3js.org/");var k=window.d3;k.floorplan=e,k.floorplan.version=a("../package.json").version,k.floorplan.heatmap=f,k.floorplan.imagelayer=g,k.floorplan.overlays=h,k.floorplan.pathplot=i,k.floorplan.vectorfield=j,c.floorplan=e,c.heatmap=f,c.imagelayer=g,c.overlays=h,c.pathplot=i,c.vectorfield=j,c["default"]=e},{"../package.json":1,"./floorplan":2,"./heatmap":3,"./imagelayer":4,"./overlays":6,"./pathplot":7,"./vectorfield":8}],6:[function(a,b,c){"use strict";function d(){function a(a){a.each(function(a){if(a){var b=d3.select(this),c=b.selectAll("rect.overlay-canvas").data([0]);c.enter().append("rect").attr("class","overlay-canvas").style("opacity",0).attr("pointer-events","all").on("click",function(){if(l){var a=d3.mouse(this);i.forEach(function(b){b(e.invert(a[0]),f.invert(a[1]))})}}).on("mouseup.drag",d).on("touchend.drag",d),c.attr("x",e.range()[0]).attr("y",f.range()[0]).attr("height",f.range()[1]-f.range()[0]).attr("width",e.range()[1]-e.range()[0]);var g=b.selectAll("path.polygon").data(a.polygons||[],function(a){return a.id});if(g.enter().append("path").attr("class","polygon").attr("vector-effect","non-scaling-stroke").attr("pointer-events","all").on("mousedown",function(a){j.forEach(function(b){b(a.id)})}).call(n).append("title"),g.exit().transition().style("opacity",1e-6).remove(),g.attr("d",function(a){return m(a.points)+"Z"}).style("cursor",l?"move":"pointer").select("title").text(function(a){return a.name||a.id}),l){var h=[];a.polygons&&a.polygons.forEach(function(a){a.points.forEach(function(b,c){h.push({index:c,parent:a})})});for(var k=1,o=b.node();o.parentNode;)if(o=o.parentNode,o.__scale__){k=o.__scale__;break}var p=b.selectAll("circle.vertex").data(h,function(a){return a.parent.id+"-"+a.index});p.exit().transition().attr("r",1e-6).remove(),p.enter().append("circle").attr("class","vertex").attr("pointer-events","all").attr("vector-effect","non-scaling-stroke").style("cursor","move").attr("r",1e-6).call(n),p.attr("cx",function(a){return e(a.parent.points[a.index].x)}).attr("cy",function(a){return f(a.parent.points[a.index].y)}).attr("r",4/k)}else b.selectAll("circle.vertex").transition().attr("r",1e-6).remove()}})}function b(a){l&&(o=a)}function c(){if(o){var b=e.invert(d3.event.dx)-e.invert(0),c=f.invert(d3.event.dy)-f.invert(0);o.parent?(o.parent.points[o.index].x+=b,o.parent.points[o.index].y+=c):o.points&&o.points.forEach(function(a){a.x+=b,a.y+=c}),a(d3.select(this.parentNode))}}function d(){o&&(k.forEach(function(a){o.parent?a(o.parent.id,o.parent.points,o.index):a(o.id,o.points)}),o=null)}var e=d3.scale.linear(),f=d3.scale.linear(),g="fp-overlays-"+(new Date).valueOf(),h="overlays",i=[],j=[],k=[],l=!1,m=d3.svg.line().x(function(a){return e(a.x)}).y(function(a){return f(a.y)}),n=d3.behavior.drag().on("dragstart",b).on("drag",c).on("dragend",d),o=null;return a.xScale=function(b){return arguments.length?(e=b,a):e},a.yScale=function(b){return arguments.length?(f=b,a):f},a.id=function(){return g},a.title=function(b){return arguments.length?(h=b,a):h},a.editMode=function(b){return arguments.length?(l=b,a):l},a.registerCanvasCallback=function(b){return arguments.length&&i.push(b),a},a.registerSelectCallback=function(b){return arguments.length&&select.Callbacks.push(b),a},a.registerMoveCallback=function(b){return arguments.length&&k.push(b),a},a}b.exports=d},{}],7:[function(a,b,c){"use strict";function d(){function a(a){a.each(function(a){if(a){var b=d3.select(this),c=b.selectAll("path").data(a,function(a){return a.id});c.exit().transition().style("opacity",1e-6).remove(),c.enter().append("path").attr("vector-effect","non-scaling-stroke").attr("fill","none").style("opacity",1e-6).append("title"),c.attr("class",function(a){return a.classes||a.id}).attr("d",function(a,b){return d(g(a,b))}).select("title").text(function(a){return a.title||a.id}),c.transition().style("opacity",1)}})}var b=d3.scale.linear(),c=d3.scale.linear(),d=d3.svg.line().x(function(a){return b(a.x)}).y(function(a){return c(a.y)}),e="fp-pathplot-"+(new Date).valueOf(),f="pathplot",g=function(a){return a.points};return a.xScale=function(c){return arguments.length?(b=c,a):b},a.yScale=function(b){return arguments.length?(c=b,a):c},a.id=function(){return e},a.title=function(b){return arguments.length?(f=b,a):f},a.pointFilter=function(b){return arguments.length?(g=b,a):g},a}b.exports=d},{}],8:[function(a,b,c){"use strict";function d(){function a(a){a.each(function(a){if(a&&a.map){var b=d3.select(this),c=b.selectAll("path.vector").data(a.map,function(a){return a.x+","+a.y});c.exit().transition().style("opacity",1e-6).remove(),c.enter().append("path").attr("class","vector").attr("vector-effect","non-scaling-stroke").style("opacity",1e-6).append("title");var e=a.binSize/2/d3.max(a.map,function(a){return Math.max(Math.abs(a.value.x),Math.abs(a.value.y))});c.attr("d",function(b){var c={x:b.x+a.binSize/2,y:b.y+a.binSize/2},f={x:c.x+b.value.x*e,y:c.y+b.value.y*e};return d([c,f])}).select("title").text(function(b){return Math.sqrt(b.value.x*b.value.x+b.value.y*b.value.y)+" "+a.units}),c.transition().style("opacity",1)}})}var b=d3.scale.linear(),c=d3.scale.linear(),d=d3.svg.line().x(function(a){return b(a.x)}).y(function(a){return c(a.y)}),e="fp-vectorfield-"+(new Date).valueOf(),f="vectorfield";return a.xScale=function(c){return arguments.length?(b=c,a):b},a.yScale=function(b){return arguments.length?(c=b,a):c},a.id=function(){return e},a.title=function(a){return arguments.length?(f=a,images):f},a}b.exports=d},{}]},{},[5]);